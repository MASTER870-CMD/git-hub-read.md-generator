<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Readable README Generator — Gemini</title>

<!-- libs -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  :root{
    --bg1:#071026; --bg2:#07172b;
    --accent1:#7c3aed; --accent2:#06b6d4;
    --muted:#9aa4bb; --card:rgba(255,255,255,0.02);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%; margin:0; background: linear-gradient(180deg,var(--bg1),var(--bg2)); color:#eaf0ff;}
  .wrap{max-width:1200px; margin:28px auto; padding:20px; display:grid; grid-template-columns:420px 1fr; gap:20px}
  .card{background:var(--card); padding:20px; border-radius:14px; border:1px solid rgba(255,255,255,0.03); box-shadow:0 20px 60px rgba(2,6,23,0.7)}
  header{display:flex; gap:12px; align-items:center; margin-bottom:12px}
  .logo{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;font-weight:700;background:linear-gradient(135deg,var(--accent1),var(--accent2));color:white}
  h1{margin:0;font-size:18px}
  .lead{color:var(--muted);font-size:13px;margin-top:4px}
  .drop{border:2px dashed rgba(255,255,255,0.03); padding:18px; border-radius:10px; text-align:center; cursor:pointer; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .drop:hover{border-color: rgba(124,58,237,0.5)}
  input, select, textarea{width:100%; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:rgba(0,0,0,0.3); color:inherit}
  .row{display:flex; gap:10px; align-items:center}
  .btn{background:linear-gradient(90deg,var(--accent1),var(--accent2)); border:0; color:white; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700}
  .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted)}
  .small{font-size:13px;color:var(--muted)}
  .result{min-height:360px; padding:18px; border-radius:10px; background:linear-gradient(180deg, rgba(0,0,0,0.35), rgba(255,255,255,0.01)); overflow:auto}
  .controls{display:flex; gap:8px; align-items:center; justify-content:flex-end}
  .loader{width:36px;height:36px;border:4px solid rgba(255,255,255,0.05); border-top-color:var(--accent1); border-radius:50%; animation:spin 1s linear infinite; display:none}
  @keyframes spin{to{transform:rotate(360deg)}}
  .editor{width:100%; height:260px; margin-top:10px; font-family:inherit; font-size:14px; color:inherit; background:rgba(0,0,0,0.4); border-radius:8px; padding:12px; resize:vertical}
  .flex{display:flex; gap:10px}
  @media (max-width:980px){ .wrap{grid-template-columns:1fr; padding:12px} }

  .result {
  overflow-y: auto;          /* vertical scrolling */
  max-height: 60vh;          /* limit height to 60% of viewport */
  padding-right: 10px;       /* space for scrollbar */
}

/* optional: nicer custom scrollbar for webkit browsers */
.result::-webkit-scrollbar {
  width: 8px;
}
.result::-webkit-scrollbar-thumb {
  background: rgba(124, 58, 237, 0.4);
  border-radius: 4px;
}
.result::-webkit-scrollbar-thumb:hover {
  background: rgba(124, 58, 237, 0.6);
}

#editor {
  overflow-y: auto;          /* vertical scroll */
  max-height: 40vh;          /* limit height so it doesn’t grow too big */
  resize: vertical;          /* allow user to resize if needed */
  padding-right: 10px;       /* space for scrollbar */
}

/* optional: matching custom scrollbar */
#editor::-webkit-scrollbar {
  width: 8px;
}
#editor::-webkit-scrollbar-thumb {
  background: rgba(6, 182, 212, 0.4);
  border-radius: 4px;
}
#editor::-webkit-scrollbar-thumb:hover {
  background: rgba(6, 182, 212, 0.6);
}

</style>
</head>
<body>
  <div class="wrap">
    <!-- Left: controls -->
    <div class="card">
      <header>
        <div class="logo">RD</div>
        <div>
          <h1>Readable README Generator</h1>
          <div class="lead">Upload ZIP → AI builds a clear, developer-friendly README</div>
        </div>
      </header>

      <label class="drop" id="dropZone">
        <input id="zipInput" type="file" accept=".zip">
        <div><strong>Click or drop a .zip (project)</strong><div class="small">We will analyze important files and generate an easy-to-understand README.</div></div>
      </label>

      <div style="margin-top:12px">
        <label class="small">Project name (optional)</label>
        <input id="projectName" placeholder="e.g., Awesome App"/>
      </div>

      <div style="margin-top:10px" class="row">
        <div style="flex:1">
          <label class="small">Primary language (hint)</label>
          <input id="langHint" placeholder="JavaScript, C++, Python..."/>
        </div>
        <div style="width:140px">
          <label class="small">Detail level</label>
          <select id="detailLevel">
            <option value="concise">Concise</option>
            <option value="detailed" selected>Detailed (recommended)</option>
            <option value="developer">Developer friendly</option>
          </select>
        </div>
      </div>

      <div style="margin-top:12px" class="row">
        <div class="small" id="fileInfo">No ZIP chosen</div>
        <div style="margin-left:auto; display:flex; gap:8px">
          <button class="btn" id="generateBtn">Generate README</button>
          <button class="btn ghost" id="clearBtn">Clear</button>
        </div>
      </div>

      <div style="margin-top:12px" class="small">
        <strong>Note:</strong> Replace the API key in the script with your Gemini key for testing. Do not publish the key publicly.
      </div>
    </div>

    <!-- Right: result + editor -->
    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
        <div class="small"><strong>Model:</strong> gemini-2.0-flash</div>
        <div style="display:flex; gap:12px; align-items:center">
          <div id="spinner" class="loader"></div>
          <div class="controls">
            <button class="btn ghost" id="copyBtn">Copy</button>
            <button class="btn" id="downloadBtn" style="display:none">Download</button>
          </div>
        </div>
      </div>

      <div id="resultArea" class="result">
        <div class="small" style="opacity:0.8">README preview will appear here once generated. The output is plain Markdown (human-readable).</div>
      </div>

      <div style="margin-top:12px">
        <label class="small">Edit README (optional)</label>
        <textarea id="editor" class="editor" placeholder="Edit README here before download..."></textarea>
      </div>
    </div>
  </div>
<script>
/* ---------------------------
  CONFIG — PUT YOUR GEMINI KEY
  --------------------------- */
const API_KEY = "ENTER YOUR API KEY "; // <<< replace with your key for local testing
const API_ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=" + encodeURIComponent(API_KEY);
/* --------------------------- */

const zipInput = document.getElementById('zipInput');
const dropZone = document.getElementById('dropZone');
const fileInfo = document.getElementById('fileInfo');
const generateBtn = document.getElementById('generateBtn');
const clearBtn = document.getElementById('clearBtn');
const projectNameInput = document.getElementById('projectName');
const langHintInput = document.getElementById('langHint');
const detailLevelInput = document.getElementById('detailLevel');
const resultArea = document.getElementById('resultArea');
const editor = document.getElementById('editor');
const spinner = document.getElementById('spinner');
const copyBtn = document.getElementById('copyBtn');
const downloadBtn = document.getElementById('downloadBtn');

let currentZipFile = null;
let lastReadme = '';

/* Drag/drop + file select */
dropZone.addEventListener('click', () => zipInput.click());
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.style.borderColor = 'rgba(124,58,237,0.5)'; });
dropZone.addEventListener('dragleave', e => { dropZone.style.borderColor = ''; });
dropZone.addEventListener('drop', e => { e.preventDefault(); dropZone.style.borderColor = ''; handleFile(e.dataTransfer.files[0]); });
zipInput.addEventListener('change', () => handleFile(zipInput.files[0]));

clearBtn.addEventListener('click', () => {
  zipInput.value = '';
  currentZipFile = null;
  fileInfo.textContent = 'No ZIP chosen';
  resultArea.innerHTML = '<div class="small" style="opacity:0.8">README preview will appear here once generated.</div>';
  editor.value = '';
  lastReadme = '';
  downloadBtn.style.display = 'none';
});

/* Validate + show file info */
function handleFile(file){
  if(!file) return;
  if(!file.name.toLowerCase().endsWith('.zip')) { alert('Please upload a .zip file'); return; }
  currentZipFile = file;
  fileInfo.textContent = `${file.name} — ${Math.round(file.size/1024)} KB`;
}

/* Extract useful snippets from ZIP (client-side) */
async function extractZipSnippets(zipFile, maxFiles=25, maxChars=1200){
  try {
    const jszip = new JSZip();
    const raw = await zipFile.arrayBuffer();
    const zip = await jszip.loadAsync(raw);
    const files = [];
    const names = Object.keys(zip.files).sort((a,b) => {
      const score = n => (/readme/i.test(n)?5: /package.json$/i.test(n)?4: /(^|\/)src\//i.test(n)?3: /\.(js|py|c|cpp|java|html|css|json)$/i.test(n)?2:0);
      return score(b) - score(a);
    });
    for (let name of names) {
      if(files.length >= maxFiles) break;
      const entry = zip.files[name];
      if(entry.dir) continue;
      if(/\.(png|jpg|jpeg|gif|zip|exe|class|so|dll)$/i.test(name)) continue;
      try {
        const text = await entry.async('text');
        files.push({ name, snippet: text.slice(0, maxChars) });
      } catch(e){}
    }
    return files;
  } catch (e) {
    throw new Error('Failed to read ZIP: ' + e.message);
  }
}

/* Build a strict prompt */
function buildPrompt(fileList, projectName, langHint, detailLevel){
  const header = [];
  header.push(`You are an expert technical writer. Read the project files and generate a clear, professional README.md in plain English aimed at developers.`);
  header.push(`Requirements: Title, Short description, Features, Requirements, Installation, Usage, File structure, Testing, Configuration, Contributing, License, Improvements.`);
  header.push(`Project name: ${projectName || 'Unnamed Project'}`);
  if(langHint) header.push(`Primary language: ${langHint}`);
  header.push(`Detail level: ${detailLevel}`);
  header.push(`Files and snippets:`);
  for(let f of fileList){
    header.push(`-- FILE: ${f.name}\n${f.snippet.replace(/\r/g,'')}\n`);
  }
  return header.join('\n');
}

/* Call Gemini API */
async function callGemini(prompt){
  const resp = await fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ contents: [ { parts: [ { text: prompt } ] } ] })
  });
  if(!resp.ok){
    throw new Error(`Gemini API error ${resp.status}`);
  }
  const j = await resp.json();
  return j.candidates?.[0]?.content?.parts?.[0]?.text || JSON.stringify(j, null, 2);
}

/* Main generation */
generateBtn.addEventListener('click', async () => {
  if(!currentZipFile) { alert('Please upload a project ZIP first.'); return; }
  spinner.style.display = 'inline-block';
  resultArea.innerHTML = '<div class="small" style="opacity:0.8">Analyzing ZIP…</div>';
  try {
    const files = await extractZipSnippets(currentZipFile, 30, 1200);
    const prompt = buildPrompt(files, projectNameInput.value.trim(), langHintInput.value.trim(), detailLevelInput.value);
    const generated = await callGemini(prompt);
    lastReadme = generated.trim();
    if(lastReadme.startsWith('```')) {
      lastReadme = lastReadme.replace(/^```(?:\w+)?\n/, '').replace(/\n```$/, '').trim();
    }
    resultArea.innerHTML = marked.parse(lastReadme);
    editor.value = lastReadme;
    downloadBtn.style.display = 'inline-block';
  } catch (err) {
    resultArea.innerHTML = `<div class="small" style="color:#ffb4b4">Error: ${err.message}</div>`;
  } finally {
    spinner.style.display = 'none';
  }
});

/* Copy / Download */
copyBtn.addEventListener('click', async () => {
  const text = editor.value || lastReadme;
  if(!text) return alert('Nothing to copy');
  await navigator.clipboard.writeText(text);
  alert('README copied to clipboard');
});

downloadBtn.addEventListener('click', () => {
  const text = editor.value || lastReadme;
  if(!text) return;
  const blob = new Blob([text], { type: 'text/markdown' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  const name = (projectNameInput.value.trim() || 'PROJECT').replace(/\s+/g,'_');
  a.download = `${name}_README.md`;
  document.body.appendChild(a);
  a.click();
  a.remove();
});
</script>
</body>

</html>

